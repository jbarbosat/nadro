source("http://sna.stanford.edu/setup.R")
install.packages("igraph")
library(igraph)
advice_data_frame <- read.table('http://sna.stanford.edu/sna_R_labs/data/Krack-High-Tec-edgelist-Advice.txt')
friendship_data_frame <- read.table('http://sna.stanford.edu/sna_R_labs/data/Krack-High-Tec-edgelist-Friendship.txt')
reports_to_data_frame <- read.table('http://sna.stanford.edu/sna_R_labs/data/Krack-High-Tec-edgelist-ReportsTo.txt')
attributes <- read.csv('http://sna.stanford.edu/sna_R_labs/data/Krack-High-Tec-Attributes.csv', header=T)
colnames(advice_data_frame) <- c('ego', 'alter', 'advice_tie')
colnames(friendship_data_frame) <- c('ego', 'alter', 'friendship_tie')
colnames(reports_to_data_frame) <- c('ego', 'alter', 'reports_to_tie')
advice_data_frame$ego == friendship_data_frame$ego
which(advice_data_frame$ego != friendship_data_frame$ego)
krack_full_data_frame <- cbind(advice_data_frame,
friendship_data_frame$friendship_tie,
reports_to_data_frame$reports_to_tie)
names(krack_full_data_frame)[4:5] <- c("friendship_tie",
"reports_to_tie")
krack_full_data_frame <- data.frame(ego = advice_data_frame[,1],
alter = advice_data_frame[,2],
advice_tie = advice_data_frame[,3],
friendship_tie = friendship_data_frame[,3],
reports_to_tie = reports_to_data_frame[,3])
intall.packages("knitr")
install.packages("knitr")
library(shiny)
library(ggplot2)
library(forecast)
library(arules)
library(arulesViz)
datosoriginales<-as.data.frame(read.csv("/Users/PandoraMac/Documents/Nadro/Datos/muestra_nadro2.csv",sep=','),header=FALSE,as.is = TRUE)
setwd("/Users/PandoraMac/Documents/Nadro/nadro/")
datosSub<-subset(datosoriginales,(V33=="VPRS" & V1.1!="NA"))
agg4<-aggregate(datosSub[,36],list(FactorA=datosSub[,30]),sum)
agg5<-agg4[order(agg4$x,decreasing=TRUE),]
pre.datos.market<-subset(datosSub, (V30==agg5$FactorA[1] |V30==agg5$FactorA[2] |V30==agg5$FactorA[3]
|V30==agg5$FactorA[4] |V30==agg5$FactorA[5] |V30==agg5$FactorA[6]
|V30==agg5$FactorA[7] |V30==agg5$FactorA[8] |V30==agg5$FactorA[9]
|V30==agg5$FactorA[10] |V30==agg5$FactorA[11] |V30==agg5$FactorA[12]
|V30==agg5$FactorA[13] |V30==agg5$FactorA[14] |V30==agg5$FactorA[15]
|V30==agg5$FactorA[16] |V30==agg5$FactorA[17] |V30==agg5$FactorA[18]
|V30==agg5$FactorA[19] |V30==agg5$FactorA[20]) )
datos.market<-as.data.frame(pre.datos.market[,c(30,23)])
names(datos.market)<-c("Factura","Material")
head(datos.market)
write.csv(datos.market,"datos_market.csv",row.names=FALSE)
datos.market[,1]<-as.factor(datos.market[,1])
datos.market[,2]<-as.factor(datos.market[,2])
datos.market<-unique(datos.market)
datos.trans<-as(split(datos.market[,2], datos.market[,1]), "transactions")
freq.itemsets <- apriori(datos.trans, parameter = list(supp = 0.07,maxlen = 6,
target = "frequent itemsets"))
freq.itemsets
freq.itemsets <- apriori(datos.trans, parameter = list(supp = 0.1,maxlen = 6,
target = "frequent itemsets"))
freq.itemsets
freq.itemsets <- apriori(datos.trans, parameter = list(supp = 0.5,maxlen = 6,
target = "frequent itemsets"))
freq.itemsets
freq.itemsets <- apriori(datos.trans, parameter = list(supp = 0.2,maxlen = 6,
target = "frequent itemsets"))
freq.itemsets
freq.itemsets <- apriori(datos.trans, parameter = list(supp = 0.15,maxlen = 6,
target = "frequent itemsets"))
freq.itemsets
freq.itemsets.sort <-sort(freq.itemsets, by = "support")
reglas.1<-  freq.itemsets.sort[1:200000]
reglas.2 <- subset(reglas.1, lhs.support > 0.01)
reglas.1 <- apriori(datos.trans, parameter = list(supp = 0.15, maxlen=6
target = "rules", ext=TRUE))
freq.itemsets.sort[1:10]
inspect(freq.itemsets.sort[1:10])
reglas.1 <- apriori(datos.trans, parameter = list(supp = 0.15, maxlen=6,
target = "rules", ext=TRUE))
reglas.1
reglas.2 <- subset(reglas.1, lhs.support > 0.01)
reglas.2
reglas.2 <- subset(reglas.1, lhs.support > 0.1)
reglas.2
reglas.2 <- subset(reglas.1, lhs.support > 0.2)
reglas.2
reglas.3 <- subset(reglas.2, lift > 4.5)
reglas3
reglas.3
reglas.3 <- subset(reglas.2, lift > .1)
reglas.3
reglas.3 <- subset(reglas.2, lift > .2)
reglas.3
reglas.3 <- subset(reglas.2, lift > .5)
reglas.3
reglas.3 <- subset(reglas.2, lift > 1)
reglas.3
reglas.3 <- subset(reglas.2, lift > 2)
reglas.3
reglas.2 <- subset(reglas.1, lhs.support > 0.4)
reglas.2
reglas.2 <- subset(reglas.1, lhs.support > 0.3)
reglas.2
reglas.2 <- subset(reglas.1, lhs.support > 0.2)
reglas.2
reglas.2 <- subset(reglas.1, lhs.support > 0.25)
reglas.2
reglas.2 <- subset(reglas.1, lhs.support > 0.22)
reglas.2
reglas.2 <- subset(reglas.1, lhs.support > 0.23)
reglas.2
reglas.2 <- subset(reglas.1, lhs.support > 0.24)
reglas.2
reglas.2 <- subset(reglas.1, lhs.support > 0.25)
reglas.2
reglas.2 <- subset(reglas.1, lhs.support > 0.24)
reglas.2
reglas.3 <- subset(reglas.2, lift > 2)
reglas.3
reglas.2 <- subset(reglas.1, lhs.support > 0.25)
reglas.2
reglas.3 <- subset(reglas.2, lift > 2)
reglas.3
reglas.3 <- subset(reglas.2, lift > 4)
reglas.3
reglas.3 <- subset(reglas.2, lift > 3)
reglas.3
par(mar = c(0, 0, 0, 0))
plot(reglas.4[1:10], method = "graph", control = list(type = "items"))
reglas.4 <- sort(reglas.3, by = "lift")
plot(reglas.4[1:10], method = "graph", control = list(type = "items"))
getwd8)
getwd())
getwd()
ids<-c(9592,11400,15761,10489,14685,1441,6091,7357,2127,1408,2164,6079,7443,7388)
sort(ids)
ids<-c( 1408,  1441,  2127  ,2164 , 6079 , 6091  ,7357,  7388  ,7443 , 9592, 10489, 11400, 14685, 15761)
nombres-c("BAYRO 10 G CRA 40 G",
"ACTRON-400 400 MG CAPS 30",
"RIOPAN GEL 10 ML SB 20",
"TECTA 40 MG TAB 14 CAPAENTER 171",
"TYLEX 750 MG TAB 20",
"EVRA 6MG/600MCG PARCHES 3",
"EUTIROX 100 MG TAB 50",
"EUTIROX 25 MCG TAB 50",
"GAVINDO TAB 30",
"JANUMET 50/850MG CPR56 RECUB",
"DOLAC 10 MG TAB 10",
"TAPAZOL 5 MG TAB 20",
"METAMIZOL 5G/100ML JBE 120ML",
"DOLO-NEUROBION FORTE DC1X3ML"
)
nombres<-c("BAYRO 10 G CRA 40 G",
"ACTRON-400 400 MG CAPS 30",
"RIOPAN GEL 10 ML SB 20",
"TECTA 40 MG TAB 14 CAPAENTER 171",
"TYLEX 750 MG TAB 20",
"EVRA 6MG/600MCG PARCHES 3",
"EUTIROX 100 MG TAB 50",
"EUTIROX 25 MCG TAB 50",
"GAVINDO TAB 30",
"JANUMET 50/850MG CPR56 RECUB",
"DOLAC 10 MG TAB 10",
"TAPAZOL 5 MG TAB 20",
"METAMIZOL 5G/100ML JBE 120ML",
"DOLO-NEUROBION FORTE DC1X3ML"
)
mb.tabla<-cbind(ids,nombres)
print(mb.tabla,justify="center")
tipo<-c("Antiinflamatorio, analgésico",
"Antiinflamatorio, analgésico",
"Antiácido",
"Antiulceroso",
"Analgesico y antipiretico",
"Anticonceptivo",
"Hormona tiroidea T-4 (L-tiroxina)",
"Hormona tiroidea T-4 (L-tiroxina)",
"Complejo B",
"Tratamiendo de diabetes mellitus tipo 2",
"Analgésico",
"Hipertiroidismo",
"Antipirético",
"Antiinflamatorio, analgésico"
)
mb.tabla<-cbind(ids,nombres,tipo)
print(mb.tabla,justify="center")
save(reglas.4,"MarketBasket.R")
save("MarketBasket.R",reglas.4)
save(file="MarketBasket.R",reglas.4)
save(file="MarketBasket.RData",reglas.4)
load("MarketBasket.RData")
library("RMySQL")
install.packages("RMySQL")
plor(1,1)
plot(1,1)
plot(runif(10),runif(10))
par()
par(mar=0)
par(mar=c(1,1,1,1))
plot(runif(10),runif(10))
par(mar=c(2,2,2,2))
plot(runif(10),runif(10))
par(mar=c(3,3,3,3))
plot(runif(10),runif(10))
abline(h=0)
abline(h=.6)
meses<-c("Todos","Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"),
meses<-c("Todos","Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic")
anios<-("2011","2012","2013")
anios<-rep(c("2011","2012","2013"),rep=12)
anios
anios<-rep(c("2011","2012","2013"),each=12)
anios
meses<-c("Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic")
paste(meses,anios)
anios<-rep(c("2011, ","2012, ","2013, "),each=12)
paste(meses,anios,collapse=TRUE)
paste(meses,anios,collapse="")
anios<-rep(c("2011","2012","2013"),each=12)
paste(meses,anios)
